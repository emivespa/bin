#!/bin/sh -e
#
# - organize your git clones
#
# git clonex $mode $url
#
# git clonex a https://git.host/user/project == git clone https://git.host/user/project ~/src/git.host/user/project
# git clonex r https://git.host/user/project == git clone https://git.host/user/project ./git.host/user/project
#
# TODO: clarify whether clone root is ./ or ./src

mode="$1"
url="$2"
shift
shift

case "$url" in
	(*'://'*)  dir="${url#*://}"  ;; # Strip protocol if there is one.
	(*)        dir="$url"         ;; # Case for user@host type URLs.
esac

case "$mode" in
	(a) dir="${HOME:-'~'}/src/${dir}"  ;; # "absolute"
	(r) dir="./${dir}"                 ;; # "relative"
	(*) exit 1                         ;;
esac

git clone "$url" "$dir" "$@"
