#!/bin/sh -eu
#
# - toggle light and dark theme
#
# TODO: s/dconf/gsettings/ ?

case "${DESKTOP_SESSION:-}" in
	('gnome') # TODO: check.
		case "$(gsettings get org.gnome.desktop.interface color-scheme)" in
			("'prefer-dark'")
				gsettings set org.gnome.desktop.interface color-scheme prefer-light || true
				;;
			("'prefer-light'")
				gsettings set org.gnome.desktop.interface color-scheme prefer-dark || true
				;;
		esac
		;;
	('gnome-flashback-metacity')
		case "$(gsettings get org.gnome.desktop.interface color-scheme)" in
			("'prefer-dark'")
				gsettings set org.gnome.desktop.interface color-scheme prefer-light || true
				;;
			("'prefer-light'")
				gsettings set org.gnome.desktop.interface color-scheme prefer-dark || true
				;;
		esac
		;;
	('none+icewm')
		case "$(gsettings get org.gnome.desktop.interface color-scheme)" in
			("'prefer-dark'")
				gsettings set org.gnome.desktop.interface color-scheme prefer-light || true
				;;
			("'prefer-light'")
				gsettings set org.gnome.desktop.interface color-scheme prefer-dark || true
				;;
		esac
		;;
	('xfce')
		case "$(xfconf-query -c xsettings -p /Net/ThemeName)" in
			('Adwaita-dark')
				gsettings set org.gnome.desktop.interface color-scheme prefer-light || true
				xfconf-query -c xsettings -p /Net/ThemeName -s "Adwaita" || true
				;;
			('Adwaita')
				gsettings set org.gnome.desktop.interface color-scheme prefer-dark || true
				xfconf-query -c xsettings -p /Net/ThemeName -s "Adwaita-dark" || true
				;;
		esac
		;;
	(*)
		exit 1
		;;
esac
